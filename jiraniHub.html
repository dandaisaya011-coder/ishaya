<!DOCTYPE html>
<html lang="sw">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JiraniHub - Mfumo wa Kijamii</title>
    <style>
        :root {
            --primary: #3498db;
            --secondary: #2ecc71;
            --danger: #e74c3c;
            --warning: #f39c12;
            --dark: #34495e;
            --light: #ecf0f1;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary), #2980b9);
            color: white;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        h1, h2, h3 {
            margin-bottom: 15px;
            color: var(--dark);
        }
        
        .card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin-bottom: 20px;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: var(--dark);
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        input:focus, select:focus, textarea:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }
        
        button {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 12px 18px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s, transform 0.2s;
        }
        
        button:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
        }
        
        .btn-danger {
            background-color: var(--danger);
        }
        
        .btn-danger:hover {
            background-color: #c0392b;
        }
        
        .btn-success {
            background-color: var(--secondary);
        }
        
        .btn-success:hover {
            background-color: #27ae60;
        }
        
        .btn-warning {
            background-color: var(--warning);
        }
        
        .btn-warning:hover {
            background-color: #e67e22;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        
        table, th, td {
            border: 1px solid #ddd;
        }
        
        th, td {
            padding: 12px;
            text-align: left;
        }
        
        th {
            background-color: #f2f2f2;
            font-weight: bold;
        }
        
        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        tr:hover {
            background-color: #f1f9ff;
        }
        
        .user-badge {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
            margin-right: 5px;
        }
        
        .badge-admin {
            background-color: #e74c3c;
            color: white;
        }
        
        .badge-fundi {
            background-color: #3498db;
            color: white;
        }
        
        .badge-customer {
            background-color: #2ecc71;
            color: white;
        }
        
        .login-container {
            max-width: 400px;
            margin: 100px auto;
            padding: 20px;
        }
        
        .dashboard {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 20px;
        }
        
        .sidebar {
            background: linear-gradient(135deg, var(--dark), #2c3e50);
            color: white;
            padding: 20px;
            border-radius: 8px;
            height: fit-content;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .sidebar ul {
            list-style: none;
        }
        
        .sidebar li {
            margin-bottom: 10px;
            padding: 12px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .sidebar li.active {
            background-color: var(--primary);
        }
        
        .sidebar li:hover {
            background-color: #2c3e50;
        }
        
        .content-area {
            flex: 1;
        }
        
        .hidden {
            display: none;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 5px;
            color: white;
            background-color: var(--secondary);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            display: none;
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .stat-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .stat-card h3 {
            font-size: 14px;
            text-transform: uppercase;
            color: #777;
            margin-bottom: 10px;
        }
        
        .stat-card .number {
            font-size: 32px;
            font-weight: bold;
            color: var(--primary);
        }
        
        .profile-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .profile-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background-color: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            font-weight: bold;
            margin-right: 20px;
        }
        
        .profile-info h2 {
            margin-bottom: 5px;
        }
        
        .profile-info p {
            color: #777;
        }
        
        .items-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .item-card {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .item-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
        }
        
        .item-image {
            height: 200px;
            background-color: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #999;
            overflow: hidden;
        }
        
        .item-content {
            padding: 15px;
        }
        
        .item-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 8px;
            color: var(--dark);
        }
        
        .item-description {
            color: #666;
            margin-bottom: 15px;
            line-height: 1.4;
        }
        
        .item-price {
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .item-meta {
            display: flex;
            justify-content: space-between;
            color: #888;
            font-size: 14px;
            margin-bottom: 10px;
        }
        
        .item-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
        }
        
        .like-btn, .comment-btn, .chat-btn {
            background: none;
            border: none;
            color: #666;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 5px 10px;
            border-radius: 4px;
            transition: background-color 0.3s;
        }
        
        .like-btn:hover, .comment-btn:hover, .chat-btn:hover {
            background-color: #f0f0f0;
        }
        
        .like-btn.liked {
            color: #e74c3c;
        }
        
        .comments-section {
            margin-top: 15px;
            border-top: 1px solid #eee;
            padding-top: 15px;
        }
        
        .comment-form {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .comment-input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .comment-list {
            max-height: 200px;
            overflow-y: auto;
        }
        
        .comment {
            padding: 10px;
            border-bottom: 1px solid #eee;
            background-color: #f9f9f9;
            border-radius: 4px;
            margin-bottom: 8px;
        }
        
        .comment:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }
        
        .comment-author {
            font-weight: bold;
            margin-bottom: 5px;
            color: #333;
        }
        
        .comment-text {
            color: #555;
            margin-bottom: 5px;
        }
        
        .comment-date {
            font-size: 12px;
            color: #888;
        }
        
        .comment-actions {
            display: flex;
            gap: 10px;
            margin-top: 5px;
        }
        
        .comment-action-btn {
            background: none;
            border: none;
            color: #3498db;
            cursor: pointer;
            font-size: 12px;
            padding: 0;
        }
        
        .comment-action-btn:hover {
            text-decoration: underline;
        }
        
        .tabs {
            display: flex;
            border-bottom: 1px solid #ddd;
            margin-bottom: 20px;
        }
        
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
        }
        
        .tab.active {
            border-bottom: 2px solid var(--primary);
            color: var(--primary);
            font-weight: bold;
        }
        
        .chat-container {
            display: flex;
            height: 500px;
            border: 1px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .chat-users {
            width: 250px;
            background-color: #f5f5f5;
            border-right: 1px solid #ddd;
            overflow-y: auto;
        }
        
        .chat-user {
            padding: 15px;
            cursor: pointer;
            border-bottom: 1px solid #eee;
            transition: background-color 0.3s;
        }
        
        .chat-user:hover, .chat-user.active {
            background-color: #e9e9e9;
        }
        
        .chat-messages {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .chat-header {
            padding: 15px;
            background-color: #f5f5f5;
            border-bottom: 1px solid #ddd;
            font-weight: bold;
        }
        
        .chat-body {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .message {
            max-width: 70%;
            padding: 10px 15px;
            border-radius: 18px;
            margin-bottom: 10px;
        }
        
        .message.sent {
            align-self: flex-end;
            background-color: #dcf8c6;
        }
        
        .message.received {
            align-self: flex-start;
            background-color: #fff;
            border: 1px solid #eee;
        }
        
        .chat-footer {
            padding: 15px;
            border-top: 1px solid #ddd;
            display: flex;
            gap: 10px;
        }
        
        .chat-input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 20px;
        }
        
        .media-preview {
            margin-top: 10px;
            max-width: 100%;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .media-preview img, .media-preview video {
            max-width: 100%;
            max-height: 200px;
        }
        
        .file-upload {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .file-upload-label {
            padding: 8px 15px;
            background-color: #f0f0f0;
            border-radius: 4px;
            cursor: pointer;
            display: inline-block;
        }
        
        .file-requirements {
            color: #666;
            font-size: 12px;
            margin-top: 5px;
        }
        
        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                margin-bottom: 20px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .items-grid {
                grid-template-columns: 1fr;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .tab {
                border-bottom: 1px solid #ddd;
            }
            
            .tab.active {
                border-bottom: 1px solid var(--primary);
            }
            
            .chat-container {
                flex-direction: column;
                height: 600px;
            }
            
            .chat-users {
                width: 100%;
                height: 150px;
                border-right: none;
                border-bottom: 1px solid #ddd;
            }
        }
    </style>
</head>
<body>
    <div id="login-page" class="container login-container">
        <div class="card">
            <h2 style="text-align: center;">Ingia kwenye JiraniHub</h2>
            <form id="login-form">
                <div class="form-group">
                    <label for="email">Barua Pepe</label>
                    <input type="email" id="email" required placeholder="Weka barua pepe yako">
                </div>
                <div class="form-group">
                    <label for="password">Nenosiri</label>
                    <input type="password" id="password" required placeholder="Weka nenosiri lako">
                </div>
                <button type="submit" class="btn-success" style="width: 100%;">Ingia</button>
            </form>
            <p style="text-align: center; margin-top: 15px;">
                <a href="#" id="show-register" style="color: var(--primary); text-decoration: none;">Bado huna akaunti? Jisajili hapa</a>
            </p>
            <p style="text-align: center; margin-top: 10px;">
                <a href="#" id="show-forgot-password" style="color: var(--danger); text-decoration: none;">Umesahau nenosiri?</a>
            </p>
        </div>
    </div>

    <div id="register-page" class="container login-container hidden">
        <div class="card">
            <h2 style="text-align: center;">Jisajili kwenye JiraniHub</h2>
            <form id="register-form">
                <div class="form-group">
                    <label for="reg-name">Jina Kamili</label>
                    <input type="text" id="reg-name" required placeholder="Weka jina lako kamili">
                </div>
                <div class="form-group">
                    <label for="reg-email">Barua Pepe</label>
                    <input type="email" id="reg-email" required placeholder="Weka barua pepe yako">
                </div>
                <div class="form-group">
                    <label for="reg-phone">Namba ya Simu</label>
                    <input type="tel" id="reg-phone" required placeholder="Weka namba ya simu">
                </div>
                <div class="form-group">
                    <label for="reg-location">Mahali Unapoishi</label>
                    <input type="text" id="reg-location" required placeholder="Weka mahali unapoishi">
                </div>
                <div class="form-group">
                    <label for="reg-password">Nenosiri</label>
                    <input type="password" id="reg-password" required placeholder="Weka nenosiri">
                </div>
                <div class="form-group">
                    <label for="reg-role">Je, ungependa kujiunga kama?</label>
                    <select id="reg-role" required>
                        <option value="customer">Mteja</option>
                        <option value="fundi">Mtaalamu (Fundi)</option>
                    </select>
                </div>
                <div id="fundi-fields" class="hidden">
                    <div class="form-group">
                        <label for="reg-services">Aina ya Huduma Unazotoa</label>
                        <input type="text" id="reg-services" placeholder="Mf. Ukarabati wa Umeme, Uashi, nk">
                    </div>
                    <div class="form-group">
                        <label for="reg-experience">Uzoefu (miaka)</label>
                        <input type="number" id="reg-experience" min="0" placeholder="Miaka ya uzoefu">
                    </div>
                </div>
                <button type="submit" class="btn-success" style="width: 100%;">Jisajili</button>
            </form>
            <p style="text-align: center; margin-top: 15px;">
                <a href="#" id="show-login" style="color: var(--primary); text-decoration: none;">Tayari una akaunti? Ingia hapa</a>
            </p>
        </div>
    </div>

    <div id="forgot-password-page" class="container login-container hidden">
        <div class="card">
            <h2 style="text-align: center;">Sahau Nenosiri</h2>
            <p style="text-align: center; margin-bottom: 20px;">Weka barua pepe yako ili kubadili nenosiri</p>
            <form id="forgot-password-form">
                <div class="form-group">
                    <label for="forgot-email">Barua Pepe</label>
                    <input type="email" id="forgot-email" required placeholder="Weka barua pepe yako">
                </div>
                <button type="submit" class="btn-success" style="width: 100%;">Wasiliana na Admin</button>
            </form>
            <p style="text-align: center; margin-top: 15px;">
                <a href="#" id="show-login-from-forgot" style="color: var(--primary); text-decoration: none;">Rudi kwenye kuingia</a>
            </p>
        </div>
    </div>

    <div id="app-page" class="hidden">
        <div class="container">
            <header>
                <h1>JiraniHub - Mfumo wa Kijamii</h1>
                <div>
                    <span id="current-user"></span>
                    <button id="logout-btn" class="btn-danger">Toka</button>
                </div>
            </header>

            <div class="dashboard">
                <div class="sidebar">
                    <h3>Menyu</h3>
                    <ul>
                        <li id="nav-dashboard" class="active" onclick="showSection('dashboard')">Dashibodi</li>
                        <li id="nav-users" onclick="showSection('users')">Watumiaji</li>
                        <li id="nav-items" onclick="showSection('items')">Vitu</li>
                        <li id="nav-chat" onclick="showSection('chat')">Chat</li>
                        <li id="nav-services" onclick="showSection('services')">Huduma</li>
                        <li id="nav-bookings" onclick="showSection('bookings')">Maombi</li>
                        <li id="nav-admin" class="hidden" onclick="showSection('admin')">Usimamizi</li>
                        <li id="nav-profile" onclick="showSection('profile')">Wasifu Wangu</li>
                    </ul>
                </div>

                <div class="content-area">
                    <!-- Dashibodi Section -->
                    <div id="section-dashboard" class="section">
                        <h2>Dashibodi</h2>
                        <div class="profile-header">
                            <div class="profile-avatar" id="user-avatar">U</div>
                            <div class="profile-info">
                                <h2 id="profile-name">Jina la Mtumiaji</h2>
                                <p id="profile-role">Cheo: <span id="user-role-display"></span></p>
                            </div>
                        </div>
                        
                        <div class="stats-grid">
                            <div class="stat-card">
                                <h3>Jumla ya Watumiaji</h3>
                                <div class="number" id="total-users">0</div>
                            </div>
                            <div class="stat-card">
                                <h3>Wataalamu</h3>
                                <div class="number" id="total-fundis">0</div>
                            </div>
                            <div class="stat-card">
                                <h3>Wateja</h3>
                                <div class="number" id="total-customers">0</div>
                            </div>
                            <div class="stat-card">
                                <h3>Vitu</h3>
                                <div class="number" id="total-items">0</div>
                            </div>
                        </div>
                        
                        <div class="card">
                            <h3>Vitu Vya Hivi Karibuni</h3>
                            <div class="items-grid" id="recent-items">
                                <!-- Recent items will be populated here by JavaScript -->
                            </div>
                        </div>
                    </div>

                    <!-- Watumiaji Section -->
                    <div id="section-users" class="section hidden">
                        <h2>Watumiaji Wote</h2>
                        <div class="card">
                            <div id="user-management">
                                <button id="add-user-btn" class="btn-success">Ongeza Mtumiaji Mpya</button>
                                <div id="user-form" class="hidden">
                                    <h3>Ongeza Mtumiaji</h3>
                                    <form id="new-user-form">
                                        <div class="form-group">
                                            <label for="user-name">Jina</label>
                                            <input type="text" id="user-name" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="user-email">Barua Pepe</label>
                                            <input type="email" id="user-email" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="user-phone">Namba ya Simu</label>
                                            <input type="tel" id="user-phone" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="user-location">Mahali</label>
                                            <input type="text" id="user-location" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="user-password">Nenosiri</label>
                                            <input type="password" id="user-password" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="user-role">Cheo</label>
                                            <select id="user-role" required>
                                                <option value="customer">Mteja</option>
                                                <option value="fundi">Mtaalamu</option>
                                                <option value="admin">Msimamizi</option>
                                            </select>
                                        </div>
                                        <div id="user-fundi-fields" class="hidden">
                                            <div class="form-group">
                                                <label for="user-services">Aina ya Huduma</label>
                                                <input type="text" id="user-services">
                                            </div>
                                            <div class="form-group">
                                                <label for="user-experience">Uzoefu (miaka)</label>
                                                <input type="number" id="user-experience" min="0">
                                            </div>
                                        </div>
                                        <button type="submit" class="btn-success">Hifadhi</button>
                                        <button type="button" id="cancel-user-btn" class="btn-danger">Ghairi</button>
                                    </form>
                                </div>
                                <table id="users-table">
                                    <thead>
                                        <tr>
                                            <th>Jina</th>
                                            <th>Barua Pepe</th>
                                            <th>Simu</th>
                                            <th>Mahali</th>
                                            <th>Cheo</th>
                                            <th>Vitendo</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Users will be populated here by JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Vitu Section -->
                    <div id="section-items" class="section hidden">
                        <div class="tabs">
                            <div class="tab active" onclick="showItemsTab('all')">Vitu Vyote</div>
                            <div class="tab" onclick="showItemsTab('my')">Vitu Zangu</div>
                        </div>
                        
                        <div id="all-items-tab">
                            <h2>Vitu Vyote</h2>
                            <div class="card">
                                <div class="items-grid" id="all-items-list">
                                    <!-- All items will be populated here by JavaScript -->
                                </div>
                            </div>
                        </div>
                        
                        <div id="my-items-tab" class="hidden">
                            <h2>Vitu Zangu</h2>
                            <div class="card">
                                <button id="add-item-btn" class="btn-success">Ongeza Kitu Kipya</button>
                                <div id="item-form" class="hidden">
                                    <h3>Ongeza Kitu Kipya</h3>
                                    <form id="new-item-form">
                                        <div class="form-group">
                                            <label for="item-title">Kichwa</label>
                                            <input type="text" id="item-title" required placeholder="Kichwa cha tangazo">
                                        </div>
                                        <div class="form-group">
                                            <label for="item-description">Maelezo</label>
                                            <textarea id="item-description" required placeholder="Maelezo ya kitu" rows="4"></textarea>
                                        </div>
                                        <div class="form-group">
                                            <label for="item-price">Bei (TZS)</label>
                                            <input type="number" id="item-price" required placeholder="Bei ya kitu">
                                        </div>
                                        <div class="form-group">
                                            <label for="item-category">Aina ya Kitu</label>
                                            <select id="item-category" required>
                                                <option value="">Chagua aina</option>
                                                <option value="huduma">Huduma</option>
                                                <option value="bidhaa">Bidhaa</option>
                                                <option value="nyumba">Nyumba</option>
                                                <option value="kazi">Kazi</option>
                                                <option value="vyengine">Vyengine</option>
                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <label for="item-media">Picha/Video (si lazima)</label>
                                            <div class="file-upload">
                                                <input type="file" id="item-media" accept="image/*,video/*" class="hidden">
                                                <label for="item-media" class="file-upload-label">Chagua Faili</label>
                                                <span id="item-media-name">Hakuna faili lilochaguliwa</span>
                                            </div>
                                            <div id="item-media-preview" class="media-preview"></div>
                                            <small class="file-requirements">
                                                Vipimo vinavyokubalika: Picha (JPEG, PNG, GIF) hadi 5MB, Video (MP4, MOV) hadi 10MB
                                            </small>
                                        </div>
                                        <button type="submit" class="btn-success">Hifadhi</button>
                                        <button type="button" id="cancel-item-btn" class="btn-danger">Ghairi</button>
                                    </form>
                                </div>
                                <div class="items-grid" id="my-items-list">
                                    <!-- User's items will be populated here by JavaScript -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Chat Section -->
                    <div id="section-chat" class="section hidden">
                        <h2>Chat na Watumiaji Wengine</h2>
                        <div class="card">
                            <div class="chat-container">
                                <div class="chat-users">
                                    <h3 style="padding: 15px; border-bottom: 1px solid #ddd;">Watumiaji</h3>
                                    <div id="chat-users-list">
                                        <!-- Chat users will be populated here by JavaScript -->
                                    </div>
                                </div>
                                <div class="chat-messages">
                                    <div class="chat-header" id="chat-header">
                                        Chagua mtumiaji wa kuongea naye
                                    </div>
                                    <div class="chat-body" id="chat-body">
                                        <p style="text-align: center; color: #888; margin-top: 50%;">
                                            Chagua mtumiaji wa kuongea naye
                                        </p>
                                    </div>
                                    <div class="chat-footer">
                                        <input type="text" class="chat-input" id="chat-input" placeholder="Andika ujumbe..." disabled>
                                        <button id="send-message-btn" disabled>Tuma</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Huduma Section -->
                    <div id="section-services" class="section hidden">
                        <h2>Huduma Zote</h2>
                        <div class="card">
                            <p>Orodha ya huduma zote zilizopo katika mfumo.</p>
                            <!-- Services content will go here -->
                        </div>
                    </div>

                    <!-- Maombi Section -->
                    <div id="section-bookings" class="section hidden">
                        <h2>Maombi Yote</h2>
                        <div class="card">
                            <p>Orodha ya maombi yote ya huduma.</p>
                            <!-- Bookings content will go here -->
                        </div>
                    </div>

                    <!-- Usimamizi Section (for admins only) -->
                    <div id="section-admin" class="section hidden">
                        <h2>Panel ya Usimamizi</h2>
                        <div class="card">
                            <div class="stats-grid">
                                <div class="stat-card">
                                    <h3>Jumla ya Watumiaji</h3>
                                    <div class="number" id="admin-total-users">0</div>
                                </div>
                                <div class="stat-card">
                                    <h3>Wataalamu</h3>
                                    <div class="number" id="admin-total-fundis">0</div>
                                </div>
                                <div class="stat-card">
                                    <h3>Wateja</h3>
                                    <div class="number" id="admin-total-customers">0</div>
                                </div>
                                <div class="stat-card">
                                    <h3>Vitu</h3>
                                    <div class="number" id="admin-total-items">0</div>
                                </div>
                            </div>
                            
                            <h3>Badilisha Nenosiri la Mtumiaji</h3>
                            <form id="admin-reset-password-form">
                                <div class="form-group">
                                    <label for="admin-user-select">Chagua Mtumiaji</label>
                                    <select id="admin-user-select" required>
                                        <option value="">Chagua mtumiaji</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="admin-new-password">Nenosiri Jipya</label>
                                    <input type="password" id="admin-new-password" required placeholder="Weka nenosiri jipya">
                                </div>
                                <button type="submit" class="btn-success">Weka Nenosiri Jipya</button>
                            </form>
                            
                            <h3 style="margin-top: 30px;">Watumiaji Waliosahau Nenosiri</h3>
                            <table id="forgot-password-requests">
                                <thead>
                                    <tr>
                                        <th>Jina</th>
                                        <th>Barua Pepe</th>
                                        <th>Tarehe</th>
                                        <th>Vitendo</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Forgot password requests will be populated here by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Wasifu Section -->
                    <div id="section-profile" class="section hidden">
                        <h2>Wasifu Wangu</h2>
                        <div class="card">
                            <div class="profile-header">
                                <div class="profile-avatar" id="profile-avatar">U</div>
                                <div class="profile-info">
                                    <h2 id="profile-fullname">Jina la Mtumiaji</h2>
                                    <p id="profile-email">barua@pepe.com</p>
                                </div>
                            </div>
                            
                            <form id="profile-form">
                                <div class="form-group">
                                    <label for="profile-name">Jina Kamili</label>
                                    <input type="text" id="profile-name-input" required>
                                </div>
                                <div class="form-group">
                                    <label for="profile-email-input">Barua Pepe</label>
                                    <input type="email" id="profile-email-input" required>
                                </div>
                                <div class="form-group">
                                    <label for="profile-phone">Namba ya Simu</label>
                                    <input type="tel" id="profile-phone" required>
                                </div>
                                <div class="form-group">
                                    <label for="profile-location">Mahali</label>
                                    <input type="text" id="profile-location" required>
                                </div>
                                <div class="form-group">
                                    <label for="profile-password">Nenosiri Jipya (acha wazi kama hutaki kubadilisha)</label>
                                    <input type="password" id="profile-password">
                                </div>
                                <div id="profile-fundi-fields" class="hidden">
                                    <div class="form-group">
                                        <label for="profile-services">Aina ya Huduma</label>
                                        <input type="text" id="profile-services">
                                    </div>
                                    <div class="form-group">
                                        <label for="profile-experience">Uzoefu (miaka)</label>
                                        <input type="number" id="profile-experience" min="0">
                                    </div>
                                </div>
                                <button type="submit" class="btn-success">Hifadhi Wasifu</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="notification" id="notification"></div>

    <script>
        // Data storage - in a real app, this would be a server/database
        let users = JSON.parse(localStorage.getItem('jiranihub_users')) || [
            { 
                id: 1, 
                name: "Admin Mkuu", 
                email: "admin@jiranihub.com", 
                phone: "0712345678", 
                location: "Dar es Salaam", 
                password: "admin123", 
                role: "admin" 
            },
            { 
                id: 2, 
                name: "John Fundi", 
                email: "fundi@jiranihub.com", 
                phone: "0756123456", 
                location: "Arusha", 
                password: "fundi123", 
                role: "fundi",
                services: "Ukarabati wa Umeme, Mitambo",
                experience: 5
            },
            { 
                id: 3, 
                name: "Anna Mteja", 
                email: "customer@jiranihub.com", 
                phone: "0789123456", 
                location: "Dodoma", 
                password: "customer123", 
                role: "customer" 
            }
        ];
        
        let items = JSON.parse(localStorage.getItem('jiranihub_items')) || [
            {
                id: 1,
                userId: 2,
                title: "Ukarabati wa Umeme Nyumbani",
                description: "Ninafanya kazi zote za umeme nyumbani kwa bei nafuu. Nina vifaa vyote vinavyohitajika.",
                price: 50000,
                category: "huduma",
                date: "2023-10-15T10:30:00",
                media: null,
                likes: [3],
                comments: [
                    {
                        id: 1,
                        userId: 3,
                        text: "Nimewahi tumia huduma yako, ni nzuri sana!",
                        date: "2023-10-16T14:20:00"
                    }
                ]
            },
            {
                id: 2,
                userId: 2,
                title: "Ukarabati wa Mitambo ya Nyumba",
                description: "Ninatengeneza mitambo yote ya nyumba kama mashine ya kufua, jokofu, na televisheni.",
                price: 35000,
                category: "huduma",
                date: "2023-10-16T14:45:00",
                media: null,
                likes: [],
                comments: []
            },
            {
                id: 3,
                userId: 3,
                title: "Inauzwa TV LCD kubwa",
                description: "Inauzwa TV ya aina ya Sony, inchi 42, inafanya kazi vizuri. Nina hati ya dhamana.",
                price: 450000,
                category: "bidhaa",
                date: "2023-10-17T09:15:00",
                media: null,
                likes: [2],
                comments: [
                    {
                        id: 2,
                        userId: 2,
                        text: "Bei inaweza kupunguzwa?",
                        date: "2023-10-17T10:30:00"
                    },
                    {
                        id: 3,
                        userId: 3,
                        text: "Ninaweza kupunguza hadi 400,000/=",
                        date: "2023-10-17T11:45:00"
                    }
                ]
            }
        ];
        
        let messages = JSON.parse(localStorage.getItem('jiranihub_messages')) || [
            {
                id: 1,
                senderId: 2,
                receiverId: 3,
                text: "Habari, naweza kukupa huduma yangu ya ukarabati?",
                date: "2023-10-18T09:30:00"
            },
            {
                id: 2,
                senderId: 3,
                receiverId: 2,
                text: "Habari, ndio naomba huduma yako ya ukarabati wa umeme.",
                date: "2023-10-18T09:35:00"
            }
        ];
        
        let forgotPasswordRequests = JSON.parse(localStorage.getItem('jiranihub_forgot_requests')) || [];
        
        let currentUser = null;
        let currentItemsTab = 'all';
        let currentChatUser = null;

        // DOM elements
        const loginPage = document.getElementById('login-page');
        const registerPage = document.getElementById('register-page');
        const forgotPasswordPage = document.getElementById('forgot-password-page');
        const appPage = document.getElementById('app-page');
        const loginForm = document.getElementById('login-form');
        const registerForm = document.getElementById('register-form');
        const forgotPasswordForm = document.getElementById('forgot-password-form');
        const showRegisterLink = document.getElementById('show-register');
        const showLoginLink = document.getElementById('show-login');
        const showLoginFromForgotLink = document.getElementById('show-login-from-forgot');
        const showForgotPasswordLink = document.getElementById('show-forgot-password');
        const logoutBtn = document.getElementById('logout-btn');
        const currentUserSpan = document.getElementById('current-user');
        const userRoleDisplay = document.getElementById('user-role-display');
        const navAdmin = document.getElementById('nav-admin');
        const sectionAdmin = document.getElementById('section-admin');
        const addUserBtn = document.getElementById('add-user-btn');
        const userForm = document.getElementById('user-form');
        const newUserForm = document.getElementById('new-user-form');
        const cancelUserBtn = document.getElementById('cancel-user-btn');
        const usersTable = document.getElementById('users-table');
        const addItemBtn = document.getElementById('add-item-btn');
        const itemForm = document.getElementById('item-form');
        const newItemForm = document.getElementById('new-item-form');
        const cancelItemBtn = document.getElementById('cancel-item-btn');
        const itemMediaInput = document.getElementById('item-media');
        const itemMediaName = document.getElementById('item-media-name');
        const itemMediaPreview = document.getElementById('item-media-preview');
        const allItemsList = document.getElementById('all-items-list');
        const myItemsList = document.getElementById('my-items-list');
        const recentItems = document.getElementById('recent-items');
        const chatUsersList = document.getElementById('chat-users-list');
        const chatHeader = document.getElementById('chat-header');
        const chatBody = document.getElementById('chat-body');
        const chatInput = document.getElementById('chat-input');
        const sendMessageBtn = document.getElementById('send-message-btn');
        const profileForm = document.getElementById('profile-form');
        const profileFundiFields = document.getElementById('profile-fundi-fields');
        const adminResetPasswordForm = document.getElementById('admin-reset-password-form');
        const adminUserSelect = document.getElementById('admin-user-select');
        const adminNewPassword = document.getElementById('admin-new-password');
        const forgotPasswordRequestsTable = document.getElementById('forgot-password-requests');
        const notification = document.getElementById('notification');
        const regRoleSelect = document.getElementById('reg-role');
        const fundiFields = document.getElementById('fundi-fields');
        const userRoleSelect = document.getElementById('user-role');
        const userFundiFields = document.getElementById('user-fundi-fields');

        // Initialize the app
        function initApp() {
            // Check if user is already logged in
            const savedUser = localStorage.getItem('jiranihub_currentUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                showApp();
            }

            // Event listeners
            loginForm.addEventListener('submit', handleLogin);
            registerForm.addEventListener('submit', handleRegister);
            forgotPasswordForm.addEventListener('submit', handleForgotPassword);
            showRegisterLink.addEventListener('click', showRegister);
            showLoginLink.addEventListener('click', showLogin);
            showLoginFromForgotLink.addEventListener('click', showLoginFromForgot);
            showForgotPasswordLink.addEventListener('click', showForgotPassword);
            logoutBtn.addEventListener('click', handleLogout);
            addUserBtn.addEventListener('click', () => userForm.classList.remove('hidden'));
            cancelUserBtn.addEventListener('click', () => userForm.classList.add('hidden'));
            newUserForm.addEventListener('submit', handleAddUser);
            addItemBtn.addEventListener('click', () => itemForm.classList.remove('hidden'));
            cancelItemBtn.addEventListener('click', () => {
                itemForm.classList.add('hidden');
                resetItemForm();
            });
            newItemForm.addEventListener('submit', handleAddItem);
            itemMediaInput.addEventListener('change', handleMediaSelect);
            regRoleSelect.addEventListener('change', toggleFundiFields);
            userRoleSelect.addEventListener('change', toggleUserFundiFields);
            profileForm.addEventListener('submit', handleProfileUpdate);
            chatInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });
            sendMessageBtn.addEventListener('click', sendMessage);
            adminResetPasswordForm.addEventListener('submit', handleAdminResetPassword);

            // Load initial data
            updateStats();
        }

        // Toggle fundi fields in registration
        function toggleFundiFields() {
            if (regRoleSelect.value === 'fundi') {
                fundiFields.classList.remove('hidden');
            } else {
                fundiFields.classList.add('hidden');
            }
        }

        // Toggle fundi fields in user form
        function toggleUserFundiFields() {
            if (userRoleSelect.value === 'fundi') {
                userFundiFields.classList.remove('hidden');
            } else {
                userFundiFields.classList.add('hidden');
            }
        }

        // Show register page
        function showRegister(e) {
            e.preventDefault();
            loginPage.classList.add('hidden');
            registerPage.classList.remove('hidden');
        }

        // Show login page
        function showLogin(e) {
            e.preventDefault();
            registerPage.classList.add('hidden');
            forgotPasswordPage.classList.add('hidden');
            loginPage.classList.remove('hidden');
        }

        // Show forgot password page
        function showForgotPassword(e) {
            e.preventDefault();
            loginPage.classList.add('hidden');
            forgotPasswordPage.classList.remove('hidden');
        }

        // Show login page from forgot password
        function showLoginFromForgot(e) {
            e.preventDefault();
            forgotPasswordPage.classList.add('hidden');
            loginPage.classList.remove('hidden');
        }

        // Handle forgot password request
        function handleForgotPassword(e) {
            e.preventDefault();
            const email = document.getElementById('forgot-email').value;
            
            // Check if email exists
            const user = users.find(u => u.email === email);
            if (!user) {
                showNotification('Barua pepe hii haipo kwenye mfumo wetu!', 'error');
                return;
            }
            
            // Add to forgot password requests
            const request = {
                id: forgotPasswordRequests.length > 0 ? Math.max(...forgotPasswordRequests.map(r => r.id)) + 1 : 1,
                userId: user.id,
                email: user.email,
                date: new Date().toISOString()
            };
            
            forgotPasswordRequests.push(request);
            localStorage.setItem('jiranihub_forgot_requests', JSON.stringify(forgotPasswordRequests));
            
            showNotification('Ombi lako limewasilishwa kikamilifu. Admin atawasiliana nawe.');
            showLoginFromForgot(e);
        }

        // Handle registration
        function handleRegister(e) {
            e.preventDefault();
            const name = document.getElementById('reg-name').value;
            const email = document.getElementById('reg-email').value;
            const phone = document.getElementById('reg-phone').value;
            const location = document.getElementById('reg-location').value;
            const password = document.getElementById('reg-password').value;
            const role = document.getElementById('reg-role').value;
            let services = '';
            let experience = 0;

            if (role === 'fundi') {
                services = document.getElementById('reg-services').value;
                experience = parseInt(document.getElementById('reg-experience').value) || 0;
            }

            // Check if email already exists
            if (users.some(user => user.email === email)) {
                showNotification('Barua pepe hii tayari imeshasajiliwa!', 'error');
                return;
            }

            // Create new user
            const newUser = {
                id: users.length > 0 ? Math.max(...users.map(u => u.id)) + 1 : 1,
                name,
                email,
                phone,
                location,
                password,
                role,
                services,
                experience
            };

            users.push(newUser);
            saveUsers();
            showNotification('Akaunti imeundwa kikamilifu! Tafadhali ingia sasa.');
            showLogin(e);
        }

        // Handle login
        function handleLogin(e) {
            e.preventDefault();
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            const user = users.find(u => u.email === email && u.password === password);
            
            if (user) {
                currentUser = user;
                localStorage.setItem('jiranihub_currentUser', JSON.stringify(user));
                showApp();
                showNotification('Umefanikiwa kuingia!');
            } else {
                showNotification('Barua pepe au nenosiri si sahihi!', 'error');
            }
        }

        // Handle logout
        function handleLogout() {
            currentUser = null;
            localStorage.removeItem('jiranihub_currentUser');
            loginPage.classList.remove('hidden');
            appPage.classList.add('hidden');
            showNotification('Umefanikiwa kutoka!');
        }

        // Show the main app interface
        function showApp() {
            loginPage.classList.add('hidden');
            registerPage.classList.add('hidden');
            forgotPasswordPage.classList.add('hidden');
            appPage.classList.remove('hidden');
            
            // Update UI based on current user
            currentUserSpan.textContent = `${currentUser.name} (${currentUser.role})`;
            userRoleDisplay.textContent = currentUser.role;
            
            // Set profile avatar
            const avatar = document.getElementById('user-avatar');
            avatar.textContent = currentUser.name.charAt(0).toUpperCase();
            
            // Show admin features if user is admin
            if (currentUser.role === 'admin') {
                navAdmin.classList.remove('hidden');
                sectionAdmin.classList.remove('hidden');
                loadAdminData();
            } else {
                navAdmin.classList.add('hidden');
                sectionAdmin.classList.add('hidden');
            }
            
            // Update profile section
            updateProfileSection();
            
            // Load users table if admin
            if (currentUser.role === 'admin') {
                loadUsersTable();
            }
            
            // Load items
            loadAllItems();
            loadMyItems();
            loadRecentItems();
            
            // Load chat users
            loadChatUsers();
            
            // Update stats
            updateStats();
        }

        // Show a specific section
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.add('hidden');
            });
            
            // Remove active class from all nav items
            document.querySelectorAll('.sidebar li').forEach(item => {
                item.classList.remove('active');
            });
            
            // Show the selected section and set active nav
            document.getElementById(`section-${sectionId}`).classList.remove('hidden');
            document.getElementById(`nav-${sectionId}`).classList.add('active');
            
            // Load data for the section if needed
            if (sectionId === 'users' && currentUser.role === 'admin') {
                loadUsersTable();
            } else if (sectionId === 'items') {
                loadAllItems();
                loadMyItems();
            } else if (sectionId === 'chat') {
                loadChatUsers();
            } else if (sectionId === 'profile') {
                updateProfileSection();
            } else if (sectionId === 'dashboard') {
                loadRecentItems();
            } else if (sectionId === 'admin') {
                loadAdminData();
            }
        }

        // Show items tab
        function showItemsTab(tab) {
            currentItemsTab = tab;
            
            // Update tabs
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelector(`.tab:nth-child(${tab === 'all' ? 1 : 2})`).classList.add('active');
            
            // Show/hide content
            if (tab === 'all') {
                document.getElementById('all-items-tab').classList.remove('hidden');
                document.getElementById('my-items-tab').classList.add('hidden');
                loadAllItems();
            } else {
                document.getElementById('all-items-tab').classList.add('hidden');
                document.getElementById('my-items-tab').classList.remove('hidden');
                loadMyItems();
            }
        }

        // Update profile section with current user data
        function updateProfileSection() {
            document.getElementById('profile-fullname').textContent = currentUser.name;
            document.getElementById('profile-email').textContent = currentUser.email;
            document.getElementById('profile-name-input').value = currentUser.name;
            document.getElementById('profile-email-input').value = currentUser.email;
            document.getElementById('profile-phone').value = currentUser.phone;
            document.getElementById('profile-location').value = currentUser.location;
            
            const profileAvatar = document.getElementById('profile-avatar');
            profileAvatar.textContent = currentUser.name.charAt(0).toUpperCase();
            
            // Show fundi fields if user is a fundi
            if (currentUser.role === 'fundi') {
                profileFundiFields.classList.remove('hidden');
                document.getElementById('profile-services').value = currentUser.services || '';
                document.getElementById('profile-experience').value = currentUser.experience || 0;
            } else {
                profileFundiFields.classList.add('hidden');
            }
        }

        // Handle profile update
        function handleProfileUpdate(e) {
            e.preventDefault();
            const name = document.getElementById('profile-name-input').value;
            const email = document.getElementById('profile-email-input').value;
            const phone = document.getElementById('profile-phone').value;
            const location = document.getElementById('profile-location').value;
            const password = document.getElementById('profile-password').value;
            
            // Check if email is already taken by another user
            if (email !== currentUser.email && users.some(user => user.email === email)) {
                showNotification('Barua pepe hii tayari inatumiwa na mtu mwingine!', 'error');
                return;
            }
            
            // Update user data
            currentUser.name = name;
            currentUser.email = email;
            currentUser.phone = phone;
            currentUser.location = location;
            
            // Update password if provided
            if (password) {
                currentUser.password = password;
            }
            
            // Update fundi-specific fields if applicable
            if (currentUser.role === 'fundi') {
                currentUser.services = document.getElementById('profile-services').value;
                currentUser.experience = parseInt(document.getElementById('profile-experience').value) || 0;
            }
            
            // Update in users array
            const index = users.findIndex(u => u.id === currentUser.id);
            if (index !== -1) {
                users[index] = currentUser;
                saveUsers();
                localStorage.setItem('jiranihub_currentUser', JSON.stringify(currentUser));
                
                // Update UI
                currentUserSpan.textContent = `${currentUser.name} (${currentUser.role})`;
                const avatar = document.getElementById('user-avatar');
                avatar.textContent = currentUser.name.charAt(0).toUpperCase();
                
                showNotification('Wasifu wako umehakikishiwa!');
            }
        }

        // Handle adding a new user
        function handleAddUser(e) {
            e.preventDefault();
            const name = document.getElementById('user-name').value;
            const email = document.getElementById('user-email').value;
            const phone = document.getElementById('user-phone').value;
            const location = document.getElementById('user-location').value;
            const password = document.getElementById('user-password').value;
            const role = document.getElementById('user-role').value;
            let services = '';
            let experience = 0;
            
            if (role === 'fundi') {
                services = document.getElementById('user-services').value;
                experience = parseInt(document.getElementById('user-experience').value) || 0;
            }
            
            // Check if email already exists
            if (users.some(user => user.email === email)) {
                showNotification('Barua pepe hii tayari imeshasajiliwa!', 'error');
                return;
            }
            
            // Create new user
            const newUser = {
                id: users.length > 0 ? Math.max(...users.map(u => u.id)) + 1 : 1,
                name,
                email,
                phone,
                location,
                password,
                role,
                services,
                experience
            };
            
            users.push(newUser);
            saveUsers();
            loadUsersTable();
            userForm.classList.add('hidden');
            newUserForm.reset();
            showNotification('Mtumiaji ameongezwa kikamilifu!');
            
            // Update stats
            updateStats();
        }

        // Load users into the table
        function loadUsersTable() {
            const tbody = usersTable.querySelector('tbody');
            tbody.innerHTML = '';
            
            users.forEach(user => {
                const tr = document.createElement('tr');
                
                // Add badge based on role
                let badgeClass = '';
                if (user.role === 'admin') badgeClass = 'badge-admin';
                else if (user.role === 'fundi') badgeClass = 'badge-fundi';
                else badgeClass = 'badge-customer';
                
                tr.innerHTML = `
                    <td>${user.name}</td>
                    <td>${user.email}</td>
                    <td>${user.phone || '-'}</td>
                    <td>${user.location || '-'}</td>
                    <td><span class="user-badge ${badgeClass}">${user.role}</span></td>
                    <td>
                        ${currentUser.role === 'admin' && currentUser.id !== user.id ? `
                            <button class="btn-danger" onclick="deleteUser(${user.id})">Futa</button>
                        ` : ''}
                    </td>
                `;
                
                tbody.appendChild(tr);
            });
        }

        // Delete a user
        function deleteUser(userId) {
            // Hakikisha tu admin anaweza kufuta
            if (currentUser.role !== 'admin') {
                showNotification('Una ruhusa ya kufanya hatua hii!', 'error');
                return;
            }

            if (userId === currentUser.id) {
                showNotification('Huwezi kufuta akaunti yako mwenyewe!', 'error');
                return;
            }
            
            if (confirm('Una uhakika unataka kufuta mtumiaji huyu?')) {
                users = users.filter(user => user.id !== userId);
                saveUsers();
                loadUsersTable();
                
                // Update admin stats if visible
                if (!sectionAdmin.classList.contains('hidden')) {
                    loadAdminData();
                }
                
                showNotification('Mtumiaji amefutwa kikamilifu!');
            }
        }

        // Handle media selection with validation
        function handleMediaSelect(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            // Check file type
            const validImageTypes = ['image/jpeg', 'image/png', 'image/gif'];
            const validVideoTypes = ['video/mp4', 'video/quicktime'];
            
            if (!validImageTypes.includes(file.type) && !validVideoTypes.includes(file.type)) {
                showNotification('Aina ya faili haikubaliki. Tafadhali tumia JPEG, PNG, GIF kwa picha au MP4, MOV kwa video.', 'error');
                e.target.value = '';
                return;
            }
            
            // Check file size
            const maxSize = file.type.startsWith('image/') ? 5 * 1024 * 1024 : 10 * 1024 * 1024; // 5MB for images, 10MB for videos
            if (file.size > maxSize) {
                showNotification(`Faili ni kubwa sana. Ukubwa wa juu unaruhusiwa ni ${file.type.startsWith('image/') ? '5MB' : '10MB'}.`, 'error');
                e.target.value = '';
                return;
            }
            
            itemMediaName.textContent = file.name;
            
            // Preview image or video
            if (file.type.startsWith('image/')) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    itemMediaPreview.innerHTML = `<img src="${e.target.result}" alt="Preview" style="max-width: 100%;">`;
                };
                reader.readAsDataURL(file);
            } else if (file.type.startsWith('video/')) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    itemMediaPreview.innerHTML = `
                        <video controls style="max-width: 100%;">
                            <source src="${e.target.result}" type="${file.type}">
                            Kivinjari chako hakitumii video tag.
                        </video>
                    `;
                };
                reader.readAsDataURL(file);
            }
        }

        // Reset item form
        function resetItemForm() {
            newItemForm.reset();
            itemMediaName.textContent = 'Hakuna faili lilochaguliwa';
            itemMediaPreview.innerHTML = '';
        }

        // Handle adding a new item
        function handleAddItem(e) {
            e.preventDefault();
            const title = document.getElementById('item-title').value;
            const description = document.getElementById('item-description').value;
            const price = document.getElementById('item-price').value;
            const category = document.getElementById('item-category').value;
            const mediaFile = itemMediaInput.files[0];
            
            // Validate required fields
            if (!title || !description || !price || !category) {
                showNotification('Tafadhali jaza sehemu zote za lazima!', 'error');
                return;
            }
            
            let mediaData = null;
            if (mediaFile) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    mediaData = {
                        type: mediaFile.type.startsWith('image/') ? 'image' : 'video',
                        data: e.target.result,
                        name: mediaFile.name,
                        size: mediaFile.size
                    };
                    
                    // Create new item
                    const newItem = {
                        id: items.length > 0 ? Math.max(...items.map(i => i.id)) + 1 : 1,
                        userId: currentUser.id,
                        title,
                        description,
                        price: parseFloat(price),
                        category,
                        date: new Date().toISOString(),
                        media: mediaData,
                        likes: [],
                        comments: []
                    };
                    
                    items.push(newItem);
                    saveItems();
                    
                    // Reload views
                    loadMyItems();
                    loadAllItems();
                    loadRecentItems();
                    
                    itemForm.classList.add('hidden');
                    resetItemForm();
                    
                    showNotification('Kitu kimeongezwa kikamilifu!');
                    
                    // Update stats
                    updateStats();
                };
                reader.readAsDataURL(mediaFile);
            } else {
                // Create new item without media
                const newItem = {
                    id: items.length > 0 ? Math.max(...items.map(i => i.id)) + 1 : 1,
                    userId: currentUser.id,
                    title,
                    description,
                    price: parseFloat(price),
                    category,
                    date: new Date().toISOString(),
                    media: null,
                    likes: [],
                    comments: []
                };
                
                items.push(newItem);
                saveItems();
                
                // Reload views
                loadMyItems();
                loadAllItems();
                loadRecentItems();
                
                itemForm.classList.add('hidden');
                resetItemForm();
                
                showNotification('Kitu kimeongezwa kikamilifu!');
                
                // Update stats
                updateStats();
            }
        }

        // Load all items for everyone to see
        function loadAllItems() {
            allItemsList.innerHTML = '';
            
            if (items.length === 0) {
                allItemsList.innerHTML = '<p>Hakuna vitu vilivyopatikana.</p>';
                return;
            }
            
            // Sort items by date (newest first)
            const sortedItems = [...items].sort((a, b) => new Date(b.date) - new Date(a.date));
            
            sortedItems.forEach(item => {
                const itemCard = createItemCard(item);
                allItemsList.appendChild(itemCard);
            });
        }

        // Load user's own items
        function loadMyItems() {
            myItemsList.innerHTML = '';
            
            // Get items for current user
            const userItems = items.filter(item => item.userId === currentUser.id);
            
            if (userItems.length === 0) {
                myItemsList.innerHTML = '<p>Huna vitu bado. Bonyeza "Ongeza Kitu Kipya" kuanza.</p>';
                return;
            }
            
            // Sort items by date (newest first)
            const sortedItems = [...userItems].sort((a, b) => new Date(b.date) - new Date(a.date));
            
            sortedItems.forEach(item => {
                const itemCard = createItemCard(item, true);
                myItemsList.appendChild(itemCard);
            });
        }

        // Load recent items for dashboard
        function loadRecentItems() {
            recentItems.innerHTML = '';
            
            // Get 6 most recent items
            const recentItemsList = [...items]
                .sort((a, b) => new Date(b.date) - new Date(a.date))
                .slice(0, 6);
            
            if (recentItemsList.length === 0) {
                recentItems.innerHTML = '<p>Hakuna vitu vya hivi karibuni.</p>';
                return;
            }
            
            recentItemsList.forEach(item => {
                const itemCard = createItemCard(item);
                recentItems.appendChild(itemCard);
            });
        }

        // Create an item card
        function createItemCard(item, isOwnItem = false) {
            const itemCard = document.createElement('div');
            itemCard.className = 'item-card';
            
            // Get user who posted the item
            const itemUser = users.find(user => user.id === item.userId);
            const userName = itemUser ? itemUser.name : 'Mtumiaji';
            
            // Check if current user has liked this item
            const isLiked = item.likes && item.likes.includes(currentUser.id);
            const likeCount = item.likes ? item.likes.length : 0;
            const commentCount = item.comments ? item.comments.length : 0;
            
            // Media content
            let mediaContent = '';
            if (item.media) {
                if (item.media.type === 'image') {
                    mediaContent = `<img src="${item.media.data}" alt="Item image" style="max-width: 100%; max-height: 200px; border-radius: 8px; margin-bottom: 10px;">`;
                } else if (item.media.type === 'video') {
                    mediaContent = `
                        <video controls style="max-width: 100%; max-height: 200px; border-radius: 8px; margin-bottom: 10px;">
                            <source src="${item.media.data}" type="${item.media.type}">
                            Kivinjari chako hakitumii video tag.
                        </video>
                    `;
                }
            } else {
                // Default icon based on category
                const categoryIcon = item.category === 'huduma' ? '' : 
                                    item.category === 'bidhaa' ? '' : 
                                    item.category === 'nyumba' ? '' : 
                                    item.category === 'kazi' ? '' : '';
                mediaContent = `<div style="font-size: 48px; padding: 50px 0; text-align: center;">${categoryIcon}</div>`;
            }
            
            itemCard.innerHTML = `
                <div class="item-image">
                    ${mediaContent}
                </div>
                <div class="item-content">
                    <div class="item-title">${item.title}</div>
                    <div class="item-description">${item.description}</div>
                    <div class="item-price">TZS ${item.price.toLocaleString()}</div>
                    <div class="item-meta">
                        <span>${userName}</span>
                        <span>${new Date(item.date).toLocaleDateString()}</span>
                    </div>
                    <div class="item-actions">
                        <button class="like-btn ${isLiked ? 'liked' : ''}" onclick="toggleLike(${item.id})">
                            <span>${isLiked ? '' : ''}</span> 
                            <span>${likeCount}</span>
                        </button>
                        <button class="comment-btn" onclick="toggleComments(${item.id})">
                            <span></span> 
                            <span>${commentCount}</span>
                        </button>
                        <button class="chat-btn" onclick="startChat(${item.userId})">
                            <span></span> 
                            <span>Chat</span>
                        </button>
                        ${(currentUser.role === 'admin' || isOwnItem) ? `
                            <button class="btn-warning" onclick="editItem(${item.id})">Hariri</button>
                            <button class="btn-danger" onclick="deleteItem(${item.id})">Futa</button>
                        ` : ''}
                    </div>
                    <div class="comments-section hidden" id="comments-${item.id}">
                        <div class="comment-form">
                            <input type="text" class="comment-input" id="comment-input-${item.id}" placeholder="Andika maoni yako..." onkeypress="if(event.key==='Enter'){addComment(${item.id})}">
                            <button class="btn-success" onclick="addComment(${item.id})">Tuma</button>
                        </div>
                        <div class="comment-list" id="comment-list-${item.id}">
                            ${item.comments ? loadComments(item.comments) : '<p>Hakuna maoni bado. Kuwa wa kwanza kutoa maoni!</p>'}
                        </div>
                    </div>
                </div>
            `;
            
            return itemCard;
        }

        // Load comments for an item
        function loadComments(comments) {
            if (comments.length === 0) {
                return '<p>Hakuna maoni bado. Kuwa wa kwanza kutoa maoni!</p>';
            }
            
            // Sort comments by date (newest first)
            const sortedComments = [...comments].sort((a, b) => new Date(a.date) - new Date(b.date));
            
            return sortedComments.map(comment => {
                const commentUser = users.find(user => user.id === comment.userId);
                const userName = commentUser ? commentUser.name : 'Mtumiaji';
                const isCommentOwner = currentUser && comment.userId === currentUser.id;
                
                return `
                    <div class="comment">
                        <div class="comment-author">${userName}</div>
                        <div class="comment-text">${comment.text}</div>
                        <div class="comment-date">${new Date(comment.date).toLocaleString()}</div>
                        <div class="comment-actions">
                            ${isCommentOwner ? `
                                <button class="comment-action-btn" onclick="editComment(${comment.id}, ${comment.itemId})">Hariri</button>
                                <button class="comment-action-btn" onclick="deleteComment(${comment.id}, ${comment.itemId})">Futa</button>
                            ` : ''}
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Toggle like on an item
        function toggleLike(itemId) {
            const item = items.find(i => i.id === itemId);
            if (!item) return;
            
            // Initialize likes array if it doesn't exist
            if (!item.likes) item.likes = [];
            
            const likeIndex = item.likes.indexOf(currentUser.id);
            
            if (likeIndex === -1) {
                // Add like
                item.likes.push(currentUser.id);
            } else {
                // Remove like
                item.likes.splice(likeIndex, 1);
            }
            
            saveItems();
            
            // Reload the current view
            if (currentItemsTab === 'all') {
                loadAllItems();
            } else {
                loadMyItems();
            }
            
            loadRecentItems();
        }

        // Toggle comments section
        function toggleComments(itemId) {
            const commentsSection = document.getElementById(`comments-${itemId}`);
            const isHidden = commentsSection.classList.contains('hidden');
            
            if (isHidden) {
                commentsSection.classList.remove('hidden');
                // Load comments when opening
                const item = items.find(i => i.id === itemId);
                if (item) {
                    const commentList = document.getElementById(`comment-list-${itemId}`);
                    commentList.innerHTML = loadComments(item.comments || []);
                }
            } else {
                commentsSection.classList.add('hidden');
            }
        }

        // Add a comment to an item
        function addComment(itemId) {
            const item = items.find(i => i.id === itemId);
            if (!item) {
                showNotification('Kitu hakijapatikana!', 'error');
                return;
            }
            
            const commentInput = document.getElementById(`comment-input-${itemId}`);
            const commentText = commentInput.value.trim();
            
            if (!commentText) {
                showNotification('Tafadhali andika maoni yako kwanza!', 'error');
                return;
            }
            
            // Initialize comments array if it doesn't exist
            if (!item.comments) item.comments = [];
            
            // Create new comment
            const newComment = {
                id: Date.now(), // Unique ID
                userId: currentUser.id,
                itemId: itemId,
                text: commentText,
                date: new Date().toISOString()
            };
            
            // Add comment to item
            item.comments.push(newComment);
            
            saveItems();
            commentInput.value = '';
            
            // Update comments list
            const commentList = document.getElementById(`comment-list-${itemId}`);
            commentList.innerHTML = loadComments(item.comments);
            
            // Update comment count
            const commentBtn = document.querySelector(`button[onclick="toggleComments(${itemId})"]`);
            if (commentBtn) {
                const countSpan = commentBtn.querySelector('span:last-child');
                if (countSpan) {
                    countSpan.textContent = item.comments.length;
                }
            }
            
            showNotification('Maoni yameongezwa kikamilifu!');
        }

        // Edit comment
        function editComment(commentId, itemId) {
            const item = items.find(i => i.id === itemId);
            if (!item || !item.comments) return;
            
            const comment = item.comments.find(c => c.id === commentId);
            if (!comment) return;
            
            const newText = prompt("Hariri maoni yako:", comment.text);
            if (newText !== null && newText.trim() !== "") {
                comment.text = newText.trim();
                comment.date = new Date().toISOString(); // Update date
                
                saveItems();
                
                // Update comments list
                const commentList = document.getElementById(`comment-list-${itemId}`);
                commentList.innerHTML = loadComments(item.comments);
                
                showNotification('Maoni yamehaririwa kikamilifu!');
            }
        }

        // Delete comment
        function deleteComment(commentId, itemId) {
            if (!confirm("Una uhakika unataka kufuta maoni haya?")) return;
            
            const item = items.find(i => i.id === itemId);
            if (!item || !item.comments) return;
            
            // Remove comment
            item.comments = item.comments.filter(c => c.id !== commentId);
            
            saveItems();
            
            // Update comments list
            const commentList = document.getElementById(`comment-list-${itemId}`);
            commentList.innerHTML = loadComments(item.comments);
            
            // Update comment count
            const commentBtn = document.querySelector(`button[onclick="toggleComments(${itemId})"]`);
            if (commentBtn) {
                const countSpan = commentBtn.querySelector('span:last-child');
                if (countSpan) {
                    countSpan.textContent = item.comments.length;
                }
            }
            
            showNotification('Maoni yamefutwa kikamilifu!');
        }

        // Load chat users
        function loadChatUsers() {
            chatUsersList.innerHTML = '';
            
            // Get all users except current user
            const otherUsers = users.filter(user => user.id !== currentUser.id);
            
            if (otherUsers.length === 0) {
                chatUsersList.innerHTML = '<p style="padding: 15px;">Hakuna watumiaji wengine.</p>';
                return;
            }
            
            otherUsers.forEach(user => {
                const userElement = document.createElement('div');
                userElement.className = 'chat-user';
                userElement.innerHTML = `
                    <div>${user.name}</div>
                    <small>${user.role}</small>
                `;
                userElement.addEventListener('click', () => selectChatUser(user));
                chatUsersList.appendChild(userElement);
            });
        }

        // Select a user to chat with
        function selectChatUser(user) {
            currentChatUser = user;
            
            // Update UI
            document.querySelectorAll('.chat-user').forEach(u => u.classList.remove('active'));
            event.currentTarget.classList.add('active');
            
            chatHeader.textContent = `Inaongea na ${user.name}`;
            chatInput.disabled = false;
            sendMessageBtn.disabled = false;
            
            // Load messages
            loadChatMessages();
        }

        // Load chat messages
        function loadChatMessages() {
            if (!currentChatUser) return;
            
            chatBody.innerHTML = '';
            
            // Get messages between current user and selected user
            const userMessages = messages.filter(msg => 
                (msg.senderId === currentUser.id && msg.receiverId === currentChatUser.id) ||
                (msg.senderId === currentChatUser.id && msg.receiverId === currentUser.id)
            );
            
            // Sort messages by date
            userMessages.sort((a, b) => new Date(a.date) - new Date(b.date));
            
            if (userMessages.length === 0) {
                chatBody.innerHTML = '<p style="text-align: center; color: #888; margin-top: 50%;">Hakuna ujumbe bado. Anza mazungumzo sasa!</p>';
                return;
            }
            
            userMessages.forEach(msg => {
                const messageElement = document.createElement('div');
                messageElement.className = `message ${msg.senderId === currentUser.id ? 'sent' : 'received'}`;
                
                const sender = users.find(user => user.id === msg.senderId);
                messageElement.innerHTML = `
                    <div><strong>${sender.name}:</strong></div>
                    <div>${msg.text}</div>
                    <div><small>${new Date(msg.date).toLocaleTimeString()}</small></div>
                `;
                
                chatBody.appendChild(messageElement);
            });
            
            // Scroll to bottom
            chatBody.scrollTop = chatBody.scrollHeight;
        }

        // Send a message
        function sendMessage() {
            if (!currentChatUser || !chatInput.value.trim()) return;
            
            const newMessage = {
                id: messages.length > 0 ? Math.max(...messages.map(m => m.id)) + 1 : 1,
                senderId: currentUser.id,
                receiverId: currentChatUser.id,
                text: chatInput.value,
                date: new Date().toISOString()
            };
            
            messages.push(newMessage);
            localStorage.setItem('jiranihub_messages', JSON.stringify(messages));
            
            chatInput.value = '';
            loadChatMessages();
        }

        // Start chat with a user
        function startChat(userId) {
            const user = users.find(u => u.id === userId);
            if (!user) return;
            
            // Switch to chat section
            showSection('chat');
            
            // Select the user
            setTimeout(() => {
                const userElements = document.querySelectorAll('.chat-user');
                userElements.forEach(element => {
                    if (element.textContent.includes(user.name)) {
                        element.click();
                    }
                });
            }, 100);
        }

        // Edit item
        function editItem(itemId) {
            const item = items.find(i => i.id === itemId);
            if (!item) return;
            
            // Fill form with item data
            document.getElementById('item-title').value = item.title;
            document.getElementById('item-description').value = item.description;
            document.getElementById('item-price').value = item.price;
            document.getElementById('item-category').value = item.category;
            
            // Show media preview if exists
            if (item.media) {
                itemMediaName.textContent = 'Media imewekwa';
                if (item.media.type === 'image') {
                    itemMediaPreview.innerHTML = `<img src="${item.media.data}" alt="Preview" style="max-width: 100%;">`;
                } else if (item.media.type === 'video') {
                    itemMediaPreview.innerHTML = `<video controls style="max-width: 100%;"><source src="${item.media.data}"></video>`;
                }
            } else {
                itemMediaName.textContent = 'Hakuna faili lilochaguliwa';
                itemMediaPreview.innerHTML = '';
            }
            
            // Show form
            itemForm.classList.remove('hidden');
            
            // Change form to edit mode
            newItemForm.onsubmit = function(e) {
                e.preventDefault();
                
                // Update item
                item.title = document.getElementById('item-title').value;
                item.description = document.getElementById('item-description').value;
                item.price = parseFloat(document.getElementById('item-price').value);
                item.category = document.getElementById('item-category').value;
                
                // Handle media update if a new file is selected
                const mediaFile = itemMediaInput.files[0];
                if (mediaFile) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        item.media = {
                            type: mediaFile.type.startsWith('image/') ? 'image' : 'video',
                            data: e.target.result,
                            name: mediaFile.name,
                            size: mediaFile.size
                        };
                        
                        saveItems();
                        
                        // Reload views
                        loadMyItems();
                        loadAllItems();
                        loadRecentItems();
                        
                        itemForm.classList.add('hidden');
                        resetItemForm();
                        
                        // Reset form handler
                        newItemForm.onsubmit = handleAddItem;
                        
                        showNotification('Kitu kimehaririwa kikamilifu!');
                    };
                    reader.readAsDataURL(mediaFile);
                } else {
                    saveItems();
                    
                    // Reload views
                    loadMyItems();
                    loadAllItems();
                    loadRecentItems();
                    
                    itemForm.classList.add('hidden');
                    resetItemForm();
                    
                    // Reset form handler
                    newItemForm.onsubmit = handleAddItem;
                    
                    showNotification('Kitu kimehaririwa kikamilifu!');
                }
            };
        }

        // Delete item
        function deleteItem(itemId) {
            const item = items.find(i => i.id === itemId);
            if (!item) return;
            
            // Check if user has permission to delete
            if (currentUser.role !== 'admin' && item.userId !== currentUser.id) {
                showNotification('Huna ruhusa ya kufuta kitu hiki!', 'error');
                return;
            }
            
            if (confirm('Una uhakika unataka kufuta kitu hiki?')) {
                items = items.filter(i => i.id !== itemId);
                saveItems();
                
                // Reload views
                if (currentItemsTab === 'all') {
                    loadAllItems();
                } else {
                    loadMyItems();
                }
                
                loadRecentItems();
                
                showNotification('Kitu kimefutwa kikamilifu!');
            }
        }

        // Load admin data
        function loadAdminData() {
            // Update admin stats
            document.getElementById('admin-total-users').textContent = users.length;
            document.getElementById('admin-total-fundis').textContent = users.filter(u => u.role === 'fundi').length;
            document.getElementById('admin-total-customers').textContent = users.filter(u => u.role === 'customer').length;
            document.getElementById('admin-total-items').textContent = items.length;
            
            // Load user select for password reset
            adminUserSelect.innerHTML = '<option value="">Chagua mtumiaji</option>';
            users.forEach(user => {
                if (user.id !== currentUser.id) {
                    const option = document.createElement('option');
                    option.value = user.id;
                    option.textContent = `${user.name} (${user.email})`;
                    adminUserSelect.appendChild(option);
                }
            });
            
            // Load forgot password requests
            const tbody = forgotPasswordRequestsTable.querySelector('tbody');
            tbody.innerHTML = '';
            
            if (forgotPasswordRequests.length === 0) {
                tbody.innerHTML = '<tr><td colspan="4" style="text-align: center;">Hakuna maombi ya nenosiri.</td></tr>';
                return;
            }
            
            forgotPasswordRequests.forEach(request => {
                const user = users.find(u => u.id === request.userId);
                if (!user) return;
                
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${user.name}</td>
                    <td>${user.email}</td>
                    <td>${new Date(request.date).toLocaleDateString()}</td>
                    <td>
                        <button class="btn-success" onclick="resolvePasswordRequest(${request.id})">Imefanyika</button>
                    </td>
                `;
                tbody.appendChild(tr);
            });
        }

        // Handle admin password reset
        function handleAdminResetPassword(e) {
            e.preventDefault();
            const userId = parseInt(adminUserSelect.value);
            const newPassword = adminNewPassword.value;
            
            if (!userId || !newPassword) {
                showNotification('Tafadhali chagua mtumiaji na uweke nenosiri jipya', 'error');
                return;
            }
            
            const user = users.find(u => u.id === userId);
            if (!user) {
                showNotification('Mtumiaji huyu hayupo', 'error');
                return;
            }
            
            // Update password
            user.password = newPassword;
            saveUsers();
            
            adminResetPasswordForm.reset();
            showNotification('Nenosiri limebadilishwa kikamilifu!');
        }

        // Resolve password request
        function resolvePasswordRequest(requestId) {
            forgotPasswordRequests = forgotPasswordRequests.filter(req => req.id !== requestId);
            localStorage.setItem('jiranihub_forgot_requests', JSON.stringify(forgotPasswordRequests));
            loadAdminData();
            showNotification('Ombi limekamilishwa!');
        }

        // Update statistics
        function updateStats() {
            const totalUsers = users.length;
            const totalFundis = users.filter(u => u.role === 'fundi').length;
            const totalCustomers = users.filter(u => u.role === 'customer').length;
            const totalItems = items.length;
            
            document.getElementById('total-users').textContent = totalUsers;
            document.getElementById('total-fundis').textContent = totalFundis;
            document.getElementById('total-customers').textContent = totalCustomers;
            document.getElementById('total-items').textContent = totalItems;
        }

        // Save users to localStorage
        function saveUsers() {
            localStorage.setItem('jiranihub_users', JSON.stringify(users));
        }

        // Save items to localStorage
        function saveItems() {
            localStorage.setItem('jiranihub_items', JSON.stringify(items));
        }

        // Show notification
        function showNotification(message, type = 'success') {
            notification.textContent = message;
            notification.style.backgroundColor = type === 'success' ? '#2ecc71' : '#e74c3c';
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }

        // Initialize the app when the page loads
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>